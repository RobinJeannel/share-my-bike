<div class="container">
  <%= form_for @bike, :html => { :multipart => true } do |f| %>
    <div class="row">
      <div class="col-xs-4">
        <%= image_tag @bike.photo_bike, id:"something_unique", :class => "style_image"%>
      </div>
      <div class="col-xs-8">
        <%= f.label :title %>
        <%= f.text_field :title, class: "form-control" %>
        <%= f.label :description %>
        <%= f.text_area :description, class: "form-control"%>
        <%= f.file_field :photo_bike, id:"something_else_unique", class: '' %>
      </div>
    </div>


    <h2 class="text-center">The Bike</h2>

    <div class="row center">
      <div class="col-md-4 col-md-offset-4">
        <%= f.label :brand %>
        <%= f.text_field :brand, class: "form-control" %>
      </div>
    </div>
    <div class="row">
      <div class="col-md-5 col-md-offset-4">
        <%= f.label :category %>
        <%= f.select :category, "Fixie"=>"Fixie", "ATV"=>"ATV", "City bike"=>"City bike" %>
        <%= f.label :condition %>
        <%= f.select :condition, "Brand new"=>"Brand new", "Fairly used" => "Fairly used", "Very used"=>"Very used" %>
        <%= f.label :size %>
        <%= f.select :size, "XS"=>"XS", "S"=>"S", "M"=>"M", "L"=>"L", "XL"=>"XL" %>
      </div>
    </div>

    <h2 class="text-center">Price</h2>

    <div class="row">
      <div class="col-md-4 col-md-offset-4">
        <%= f.text_field :price, class: "form-control" %>
      </div>
    </div>

    <h2 class="text-center">Localisation</h2>

    <div class="row">
      <div class="col-md-4 col-md-offset-4">
        <%= f.text_field :localisation, class: "form-control" %>
      </div>
    </div>

    <div class="col-md-2 col-md-offset-5">
      <%= f.submit "Add a bike", class: "btn btn-danger" %>
    </div>

  <% end %>
</div>


<script>
  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object
      f=files[0]
      // Only process image files.
      if (f.type.match('image.*')) {
        var reader = new FileReader();
        reader.onload = (function(theFile) {
          return function(e) {
            // alert(e.target.result);
            document.getElementById("something_unique").src=e.target.result;
          };
        })(f);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
      }
    }
  document.getElementById('something_else_unique').addEventListener('change', handleFileSelect, false);
</script>










